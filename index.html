<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë³¸ì–´ ê¸°ë§ë²”ìœ„ ì˜¬ìŠ¤íƒ€(ì´ê²ƒë§Œ í•˜ë©´ ë‚˜ë„ ë§Œì ?)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --success: #059669;
            --error: #dc2626;
            --background: linear-gradient(135deg, #eef2ff 0%, #c7d2fe 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #1f2937;
        }

        .container {
            background-color: var(--card-bg);
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 100%;
            max-width: 500px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        header { margin-bottom: 2rem; }

        .status {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 8px;
            font-weight: 600;
        }

        .progress-wrapper {
            background: #e5e7eb;
            height: 10px;
            border-radius: 999px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .question-card {
            background: #f3f4f6;
            border-radius: 16px;
            padding: 2.5rem 1rem;
            margin-bottom: 2rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .category-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e0e7ff;
            color: #4338ca;
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 99px;
            font-weight: 700;
        }

        .jp-word {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: #111827;
            line-height: 1.2;
            word-break: keep-all;
        }

        .input-group {
            position: relative;
            margin-bottom: 1.5rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 16px;
            font-size: 1.25rem;
            text-align: center;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            outline: none;
            box-sizing: border-box;
            transition: all 0.2s ease;
            background: white;
            font-family: 'Noto Sans KR', sans-serif;
        }

        input[type="text"]:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.2);
        }

        input.correct {
            border-color: var(--success);
            background-color: #ecfdf5;
            color: var(--success);
        }

        input.wrong {
            border-color: var(--error);
            background-color: #fef2f2;
            color: var(--error);
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .feedback-msg {
            min-height: 24px;
            margin-bottom: 1rem;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .msg-success { color: var(--success); }
        .msg-error { color: var(--error); }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: var(--primary);
            color: white;
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.3);
        }

        .btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }

        #result-screen { display: none; }

        .score-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            margin: 1rem 0;
        }

        .wrong-answers-container {
            text-align: left;
            margin-top: 2rem;
            background: #f9fafb;
            border-radius: 12px;
            padding: 1rem;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
        }

        .wrong-item {
            padding: 10px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .wrong-item:last-child { border-bottom: none; }
        .w-jp { font-weight: bold; color: var(--error); font-family: 'Noto Sans JP'; }
        .w-kr { color: #4b5563; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="container" id="quiz-screen">
        <header>
            <div class="status">
                <span>ì§„í–‰ ìƒí™©</span>
                <span><span id="current-num">1</span> / <span id="total-cnt-header">0</span></span>
            </div>
            <div class="progress-wrapper">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </header>

        <div class="question-card">
            <span class="category-badge" id="category-badge">ë‹¨ì–´</span>
            <div class="jp-word" id="question-text"></div>
        </div>

        <div class="feedback-msg" id="feedback"></div>

        <div class="input-group">
            <input type="text" id="answer-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" spellcheck="false">
        </div>

        <button class="btn" id="action-btn" onclick="handleAction()">ì œì¶œí•˜ê¸° (Enter)</button>
    </div>

    <div class="container" id="result-screen">
        <h1>í…ŒìŠ¤íŠ¸ ì™„ë£Œ!</h1>
        <p>ìµœì¢… ì ìˆ˜</p>
        
        <div class="score-display"><span id="final-score">0</span>ì </div>
        <p><span id="correct-cnt">0</span> / <span id="total-cnt">0</span> ë¬¸ì œ ì •ë‹µ</p>

        <div class="wrong-answers-container" id="wrong-box" style="display: none;">
            <h4 style="margin:0 0 10px 0; color:#374151;">ì˜¤ë‹µ ë…¸íŠ¸</h4>
            <div id="wrong-list"></div>
        </div>

        <button class="btn" onclick="initQuiz()" style="margin-top: 20px;">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
    </div>

    <script>
        // === ë°ì´í„° í†µí•© (ê¸°ì¡´ + PDF ë‚´ìš©) ===
        const vocabData = [
            // --- [ê¸°ì¡´] í˜•ìš©ì‚¬ ---
            { jp: "ã‚ãŸã‚‰ã—ã„", kr: "ìƒˆë¡­ë‹¤", valid: ["ìƒˆë¡­ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãµã‚‹ã„", kr: "ì˜¤ë˜ë˜ë‹¤", valid: ["ì˜¤ë˜ë˜ë‹¤", "ì˜¤ë˜ëë‹¤", "ë‚¡ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã„ã„", kr: "ì¢‹ë‹¤", valid: ["ì¢‹ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ˆã„", kr: "ì¢‹ë‹¤", valid: ["ì¢‹ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ã‚‹ã„", kr: "ë‚˜ì˜ë‹¤", valid: ["ë‚˜ì˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã†ã‚Œã—ã„", kr: "ê¸°ì˜ë‹¤", valid: ["ê¸°ì˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‹ãªã—ã„", kr: "ìŠ¬í”„ë‹¤", valid: ["ìŠ¬í”„ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãŠãŠãã„", kr: "í¬ë‹¤", valid: ["í¬ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¡ã„ã•ã„", kr: "ì‘ë‹¤", valid: ["ì‘ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãŠã„ã—ã„", kr: "ë§›ìˆë‹¤", valid: ["ë§›ìˆë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¾ãšã„", kr: "ë§›ì—†ë‹¤", valid: ["ë§›ì—†ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãŠã‚‚ã—ã‚ã„", kr: "ì¬ë¯¸ìˆë‹¤", valid: ["ì¬ë¯¸ìˆë‹¤", "ì¬ë¯¸ ìˆë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¤ã¾ã‚‰ãªã„", kr: "ì¬ë¯¸ì—†ë‹¤", valid: ["ì¬ë¯¸ì—†ë‹¤", "ì¬ë¯¸ ì—†ë‹¤", "ì§€ë£¨í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã›ã¾ã„", kr: "ì¢ë‹¤", valid: ["ì¢ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã²ã‚ã„", kr: "ë„“ë‹¤", valid: ["ë„“ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¡ã‹ã„", kr: "ê°€ê¹ë‹¤", valid: ["ê°€ê¹ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¨ãŠã„", kr: "ë©€ë‹¤", valid: ["ë©€ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¿ã˜ã‹ã„", kr: "ì§§ë‹¤", valid: ["ì§§ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãªãŒã„", kr: "ê¸¸ë‹¤", valid: ["ê¸¸ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã™ããªã„", kr: "ì ë‹¤", valid: ["ì ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãŠãŠã„", kr: "ë§ë‹¤", valid: ["ë§ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚„ã•ã—ã„ (æ˜“ã—ã„)", kr: "ì‰½ë‹¤", valid: ["ì‰½ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚€ãšã‹ã—ã„", kr: "ì–´ë µë‹¤", valid: ["ì–´ë µë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ã‹ã„", kr: "ë¹¨ê°›ë‹¤", valid: ["ë¹¨ê°›ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ãŠã„", kr: "íŒŒë—ë‹¤", valid: ["íŒŒë—ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã—ã‚ã„", kr: "í•˜ì–—ë‹¤", valid: ["í•˜ì–—ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãã‚ã„", kr: "ê²€ë‹¤", valid: ["ê²€ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãã„ã‚ã„", kr: "ë…¸ë—ë‹¤", valid: ["ë…¸ë—ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‹ã‚‰ã„", kr: "ë§µë‹¤", valid: ["ë§µë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã—ãŠã‹ã‚‰ã„", kr: "ì§œë‹¤", valid: ["ì§œë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã—ã‚‡ã£ã±ã„", kr: "ì§œë‹¤", valid: ["ì§œë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ã¾ã„", kr: "ë‹¬ë‹¤", valid: ["ë‹¬ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã™ã£ã±ã„", kr: "ì‹œë‹¤", valid: ["ì‹œë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã«ãŒã„", kr: "ì“°ë‹¤", valid: ["ì“°ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ã¤ã„ (ç†±ã„)", kr: "ëœ¨ê²ë‹¤", valid: ["ëœ¨ê²ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‹ã‚ã„ã„", kr: "ê·€ì—½ë‹¤", valid: ["ê·€ì—½ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã„ããŒã—ã„", kr: "ë°”ì˜ë‹¤", valid: ["ë°”ì˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã™ã°ã‚‰ã—ã„", kr: "í›Œë¥­í•˜ë‹¤", valid: ["í›Œë¥­í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚ã¶ãªã„", kr: "ìœ„í—˜í•˜ë‹¤", valid: ["ìœ„í—˜í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚„ã•ã—ã„ (å„ªã—ã„)", kr: "ìƒëƒ¥í•˜ë‹¤", valid: ["ìƒëƒ¥í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã‚„ã™ã„ (å®‰ã„)", kr: "(ê°€ê²©ì´) ì‹¸ë‹¤", valid: ["ì‹¸ë‹¤", "ê°€ê²©ì´ ì‹¸ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã•ã‚€ã„", kr: "ì¶¥ë‹¤", valid: ["ì¶¥ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãã‚Œã„ã ", kr: "ì•„ë¦„ë‹µë‹¤", valid: ["ì•„ë¦„ë‹µë‹¤", "ì˜ˆì˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã™ã¦ãã ", kr: "ë©‹ì§€ë‹¤", valid: ["ë©‹ì§€ë‹¤", "ê·¼ì‚¬í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã™ãã ", kr: "ì¢‹ì•„í•˜ë‹¤", valid: ["ì¢‹ì•„í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ãã‚‰ã„ã ", kr: "ì‹«ì–´í•˜ë‹¤", valid: ["ì‹«ì–´í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã˜ã‚‡ã†ãš (ä¸Šæ‰‹)ã ", kr: "ì˜í•˜ë‹¤", valid: ["ì˜í•˜ë‹¤", "ëŠ¥ìˆ™í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¸ãŸ (ä¸‹æ‰‹)ã ", kr: "ì˜ ëª»í•˜ë‹¤", valid: ["ì˜ ëª»í•˜ë‹¤", "ì„œíˆ¬ë¥´ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã—ãšã‹ã ", kr: "ì¡°ìš©í•˜ë‹¤", valid: ["ì¡°ìš©í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã ã‚ã ", kr: "ì•ˆ ë˜ë‹¤", valid: ["ì•ˆ ë˜ë‹¤", "ì•ˆë˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã¾ã˜ã‚ã ", kr: "ì„±ì‹¤í•˜ë‹¤", valid: ["ì„±ì‹¤í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },
            { jp: "ã«ãã‚„ã‹ã ", kr: "ë²ˆí™”í•˜ë‹¤", valid: ["ë²ˆí™”í•˜ë‹¤"], type: "í˜•ìš©ì‚¬" },

            // --- [ì‹ ê·œ] PDF Page 1 (ê¸°ì´ˆ ëª…ì‚¬) ---
            { jp: "ã„ãˆ", kr: "ì§‘", valid: ["ì§‘"], type: "ì¥ì†Œ" },
            { jp: "ãˆã", kr: "ì—­", valid: ["ì—­"], type: "ì¥ì†Œ" },
            { jp: "ã‹ãŠ", kr: "ì–¼êµ´", valid: ["ì–¼êµ´"], type: "ì‹ ì²´" },
            { jp: "ã»ã‚“", kr: "ì±…", valid: ["ì±…"], type: "ì‚¬ë¬¼" },
            { jp: "ã‹ãã", kr: "ê°€ì¡±", valid: ["ê°€ì¡±"], type: "ì‚¬ëŒ" },
            { jp: "ã¶ã‹ã¤", kr: "ë™ì•„ë¦¬ í™œë™", valid: ["ë™ì•„ë¦¬", "ë™ì•„ë¦¬ í™œë™", "ë¶€í™œë™"], type: "ìƒí™œ" },
            { jp: "ã“ã“", kr: "ì—¬ê¸°", valid: ["ì—¬ê¸°"], type: "ì¥ì†Œ" },
            { jp: "ã”ã”", kr: "ì˜¤í›„", valid: ["ì˜¤í›„"], type: "ì‹œê°„" },
            { jp: "ã‚ã—", kr: "ë°œ (ë‹¤ë¦¬)", valid: ["ë°œ", "ë‹¤ë¦¬"], type: "ì‹ ì²´" },
            { jp: "ã‚ã˜", kr: "ë§›", valid: ["ë§›"], type: "ìƒí™œ" },
            { jp: "ã„ã™", kr: "ì˜ì", valid: ["ì˜ì"], type: "ì‚¬ë¬¼" },
            { jp: "ã™ã—", kr: "ì´ˆë°¥", valid: ["ì´ˆë°¥", "ìŠ¤ì‹œ"], type: "ìŒì‹" },
            { jp: "ã¡ã‹ã¦ã¤", kr: "ì§€í•˜ì² ", valid: ["ì§€í•˜ì² "], type: "êµí†µ" },
            { jp: "ã¤ããˆ", kr: "ì±…ìƒ", valid: ["ì±…ìƒ"], type: "ì‚¬ë¬¼" },
            { jp: "ã„ã—ã‚ƒ", kr: "ì˜ì‚¬", valid: ["ì˜ì‚¬"], type: "ì§ì—…" },
            { jp: "ã˜ã‚†ã†", kr: "ììœ ", valid: ["ììœ "], type: "ê°œë…" },
            { jp: "ã‚Šã‚ˆã†", kr: "ì´ìš©", valid: ["ì´ìš©"], type: "ìƒí™œ" },
            { jp: "ã‚Šã‚‡ã†ã‚Š", kr: "ìš”ë¦¬", valid: ["ìš”ë¦¬"], type: "ìƒí™œ" },
            { jp: "ã„ã¬", kr: "ê°œ", valid: ["ê°œ", "ê°•ì•„ì§€"], type: "ë™ë¬¼" },
            { jp: "ã­ã“", kr: "ê³ ì–‘ì´", valid: ["ê³ ì–‘ì´"], type: "ë™ë¬¼" },

            // --- [ì‹ ê·œ] PDF Page 2 (ìˆ«ì ì™„ì „ ì •ë³µ) ---
            // 1~10
            { jp: "ã„ã¡", kr: "1", valid: ["1", "ì¼", "í•˜ë‚˜"], type: "ìˆ«ì" },
            { jp: "ã«", kr: "2", valid: ["2", "ì´", "ë‘˜"], type: "ìˆ«ì" },
            { jp: "ã•ã‚“", kr: "3", valid: ["3", "ì‚¼", "ì…‹"], type: "ìˆ«ì" },
            { jp: "ã‚ˆã‚“", kr: "4", valid: ["4", "ì‚¬", "ë„·"], type: "ìˆ«ì" },
            { jp: "ã”", kr: "5", valid: ["5", "ì˜¤", "ë‹¤ì„¯"], type: "ìˆ«ì" },
            { jp: "ã‚ã", kr: "6", valid: ["6", "ìœ¡", "ì—¬ì„¯"], type: "ìˆ«ì" },
            { jp: "ãªãª", kr: "7", valid: ["7", "ì¹ ", "ì¼ê³±"], type: "ìˆ«ì" },
            { jp: "ã—ã¡", kr: "7", valid: ["7", "ì¹ ", "ì¼ê³±"], type: "ìˆ«ì" },
            { jp: "ã¯ã¡", kr: "8", valid: ["8", "íŒ”", "ì—¬ëŸ"], type: "ìˆ«ì" },
            { jp: "ãã‚…ã†", kr: "9", valid: ["9", "êµ¬", "ì•„í™‰"], type: "ìˆ«ì" },
            { jp: "ã", kr: "9", valid: ["9", "êµ¬", "ì•„í™‰"], type: "ìˆ«ì" },
            { jp: "ã˜ã‚…ã†", kr: "10", valid: ["10", "ì‹­", "ì—´"], type: "ìˆ«ì" },

            // 10ë‹¨ìœ„
            { jp: "ã«ã˜ã‚…ã†", kr: "20", valid: ["20", "ì´ì‹­"], type: "ìˆ«ì" },
            { jp: "ã•ã‚“ã˜ã‚…ã†", kr: "30", valid: ["30", "ì‚¼ì‹­"], type: "ìˆ«ì" },
            { jp: "ã‚ˆã‚“ã˜ã‚…ã†", kr: "40", valid: ["40", "ì‚¬ì‹­"], type: "ìˆ«ì" },
            { jp: "ã”ã˜ã‚…ã†", kr: "50", valid: ["50", "ì˜¤ì‹­"], type: "ìˆ«ì" },
            { jp: "ã‚ãã˜ã‚…ã†", kr: "60", valid: ["60", "ìœ¡ì‹­"], type: "ìˆ«ì" },
            { jp: "ãªãªã˜ã‚…ã†", kr: "70", valid: ["70", "ì¹ ì‹­"], type: "ìˆ«ì" },
            { jp: "ã¯ã¡ã˜ã‚…ã†", kr: "80", valid: ["80", "íŒ”ì‹­"], type: "ìˆ«ì" },
            { jp: "ãã‚…ã†ã˜ã‚…ã†", kr: "90", valid: ["90", "êµ¬ì‹­"], type: "ìˆ«ì" },

            // 100ë‹¨ìœ„ (ë°œìŒ ì£¼ì˜ í¬í•¨)
            { jp: "ã²ã‚ƒã", kr: "100", valid: ["100", "ë°±"], type: "ìˆ«ì" },
            { jp: "ã«ã²ã‚ƒã", kr: "200", valid: ["200", "ì´ë°±"], type: "ìˆ«ì" },
            { jp: "ã•ã‚“ã³ã‚ƒã", kr: "300", valid: ["300", "ì‚¼ë°±"], type: "ìˆ«ì" },
            { jp: "ã‚ˆã‚“ã²ã‚ƒã", kr: "400", valid: ["400", "ì‚¬ë°±"], type: "ìˆ«ì" },
            { jp: "ã”ã²ã‚ƒã", kr: "500", valid: ["500", "ì˜¤ë°±"], type: "ìˆ«ì" },
            { jp: "ã‚ã£ã´ã‚ƒã", kr: "600", valid: ["600", "ìœ¡ë°±"], type: "ìˆ«ì" },
            { jp: "ãªãªã²ã‚ƒã", kr: "700", valid: ["700", "ì¹ ë°±"], type: "ìˆ«ì" },
            { jp: "ã¯ã£ã´ã‚ƒã", kr: "800", valid: ["800", "íŒ”ë°±"], type: "ìˆ«ì" },
            { jp: "ãã‚…ã†ã²ã‚ƒã", kr: "900", valid: ["900", "êµ¬ë°±"], type: "ìˆ«ì" },

            // ì²œ/ë§Œ/ì–µ
            { jp: "ã›ã‚“", kr: "1,000", valid: ["1000", "ì²œ", "ì¼ì²œ"], type: "ìˆ«ì" },
            { jp: "ã•ã‚“ãœã‚“", kr: "3,000", valid: ["3000", "ì‚¼ì²œ"], type: "ìˆ«ì" },
            { jp: "ã¯ã£ã›ã‚“", kr: "8,000", valid: ["8000", "íŒ”ì²œ"], type: "ìˆ«ì" },
            { jp: "ã„ã¡ã¾ã‚“", kr: "10,000", valid: ["10000", "ë§Œ", "ì¼ë§Œ"], type: "ìˆ«ì" },
            { jp: "ã˜ã‚…ã†ã¾ã‚“", kr: "100,000", valid: ["100000", "ì‹­ë§Œ"], type: "ìˆ«ì" },
            { jp: "ã²ã‚ƒãã¾ã‚“", kr: "1,000,000", valid: ["1000000", "ë°±ë§Œ"], type: "ìˆ«ì" },
            { jp: "ã„ã¡ãŠã", kr: "1ì–µ", valid: ["100000000", "1ì–µ", "ì¼ì–µ"], type: "ìˆ«ì" },

            // --- [ê¸°ì¡´] ê¸°íƒ€ ì–´íœ˜ ---
            { jp: "ãˆã„ãŒ", kr: "ì˜í™”", valid: ["ì˜í™”"], type: "ëª…ì‚¬" },
            { jp: "ã™ã„ãˆã„", kr: "ìˆ˜ì˜", valid: ["ìˆ˜ì˜"], type: "ëª…ì‚¬" },
            { jp: "ãã‚“ã“ã†", kr: "ì€í–‰", valid: ["ì€í–‰"], type: "ëª…ì‚¬" },
            { jp: "ã¶ã‚“ã‹", kr: "ë¬¸í™”", valid: ["ë¬¸í™”"], type: "ëª…ì‚¬" },
            { jp: "ã—ã‚…ã¿", kr: "ì·¨ë¯¸", valid: ["ì·¨ë¯¸"], type: "ëª…ì‚¬" },
            { jp: "ãã‚‡ã­ã‚“", kr: "ì‘ë…„", valid: ["ì‘ë…„", "ì§€ë‚œí•´"], type: "ì‹œê°„" },
            { jp: "ã“ã¨ã—", kr: "ì˜¬í•´", valid: ["ì˜¬í•´", "ê¸ˆë…„"], type: "ì‹œê°„" },
            { jp: "ã‚‰ã„ã­ã‚“", kr: "ë‚´ë…„", valid: ["ë‚´ë…„"], type: "ì‹œê°„" },
            { jp: "ãã®ã†", kr: "ì–´ì œ", valid: ["ì–´ì œ"], type: "ì‹œê°„" },
            { jp: "ãã‚‡ã†", kr: "ì˜¤ëŠ˜", valid: ["ì˜¤ëŠ˜"], type: "ì‹œê°„" },
            { jp: "ã‚ã—ãŸ", kr: "ë‚´ì¼", valid: ["ë‚´ì¼"], type: "ì‹œê°„" },
            { jp: "ãã ã‚‚ã®", kr: "ê³¼ì¼", valid: ["ê³¼ì¼"], type: "ìŒì‹" },
            { jp: "ã‚‚ã‚‚", kr: "ë³µìˆ­ì•„", valid: ["ë³µìˆ­ì•„"], type: "ìŒì‹" },
            { jp: "ã‚Šã‚“ã”", kr: "ì‚¬ê³¼", valid: ["ì‚¬ê³¼"], type: "ìŒì‹" },
            { jp: "ã™ã„ã‹", kr: "ìˆ˜ë°•", valid: ["ìˆ˜ë°•"], type: "ìŒì‹" },
            { jp: "ã„ã¡ã”", kr: "ë”¸ê¸°", valid: ["ë”¸ê¸°"], type: "ìŒì‹" },
            { jp: "ãƒãƒ³ã‚·ãƒ§ãƒ³", kr: "ì¤‘Â·ê³ ì¸µ ì•„íŒŒíŠ¸", valid: ["ë§¨ì…˜", "ì•„íŒŒíŠ¸"], type: "ì£¼ê±°" },
            { jp: "ã‚¢ãƒ‘ãƒ¼ãƒˆ", kr: "ì—°ë¦½ ì£¼íƒ", valid: ["ì—°ë¦½ì£¼íƒ", "ì•„íŒŒíŠ¸"], type: "ì£¼ê±°" }
        ];

        let quizQueue = [];
        let currentIndex = 0;
        let score = 0;
        let wrongList = [];
        let isWaitingNext = false;

        const dom = {
            screenQuiz: document.getElementById('quiz-screen'),
            screenResult: document.getElementById('result-screen'),
            progressBar: document.getElementById('progress-bar'),
            currentNum: document.getElementById('current-num'),
            totalCntHeader: document.getElementById('total-cnt-header'),
            question: document.getElementById('question-text'),
            categoryBadge: document.getElementById('category-badge'),
            input: document.getElementById('answer-input'),
            feedback: document.getElementById('feedback'),
            btn: document.getElementById('action-btn'),
            finalScore: document.getElementById('final-score'),
            correctCnt: document.getElementById('correct-cnt'),
            totalCnt: document.getElementById('total-cnt'),
            wrongBox: document.getElementById('wrong-box'),
            wrongList: document.getElementById('wrong-list')
        };

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function initQuiz() {
            quizQueue = shuffle([...vocabData]);
            currentIndex = 0;
            score = 0;
            wrongList = [];
            isWaitingNext = false;

            dom.screenQuiz.style.display = 'block';
            dom.screenResult.style.display = 'none';
            dom.totalCntHeader.innerText = quizQueue.length;
            
            showQuestion();
        }

        function showQuestion() {
            isWaitingNext = false;
            const currentData = quizQueue[currentIndex];
            const total = quizQueue.length;

            dom.currentNum.innerText = currentIndex + 1;
            dom.progressBar.style.width = `${((currentIndex) / total) * 100}%`;
            
            dom.question.innerText = currentData.jp;
            dom.categoryBadge.innerText = currentData.type;
            dom.feedback.innerText = '';
            
            dom.input.value = '';
            dom.input.disabled = false;
            dom.input.className = '';
            dom.input.focus();

            dom.btn.innerText = 'ì œì¶œí•˜ê¸° (Enter)';
            dom.btn.style.background = 'var(--primary)';
        }

        function handleAction() {
            if (isWaitingNext) {
                nextQuestion();
            } else {
                checkAnswer();
            }
        }

        function checkAnswer() {
            const inputVal = dom.input.value.trim();
            if (!inputVal) return;

            const currentData = quizQueue[currentIndex];
            const cleanInput = inputVal.replace(/\s+/g, '');
            
            // ì •ë‹µ ì²´í¬ (ì‰¼í‘œ, ë„ì–´ì“°ê¸° ë“± ìœ ì—°í•˜ê²Œ)
            const isCorrect = currentData.valid.some(ans => ans.replace(/\s+/g, '') === cleanInput);

            isWaitingNext = true;
            dom.input.disabled = true;

            if (isCorrect) {
                score++;
                dom.input.classList.add('correct');
                dom.feedback.innerHTML = '<span class="msg-success">ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰</span>';
                dom.btn.style.background = 'var(--success)';
            } else {
                dom.input.classList.add('wrong');
                dom.feedback.innerHTML = `<span class="msg-error">ì˜¤ë‹µ! ì •ë‹µ: [${currentData.kr}]</span>`;
                dom.btn.style.background = 'var(--error)';
                wrongList.push({
                    jp: currentData.jp,
                    kr: currentData.kr,
                    user: inputVal
                });
            }

            dom.btn.innerText = 'ë‹¤ìŒ ë¬¸ì œ (Enter â†µ)';
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex >= quizQueue.length) {
                finishQuiz();
            } else {
                showQuestion();
            }
        }

        function finishQuiz() {
            dom.screenQuiz.style.display = 'none';
            dom.screenResult.style.display = 'block';

            const finalScoreVal = Math.round((score / quizQueue.length) * 100);
            dom.finalScore.innerText = finalScoreVal;
            dom.correctCnt.innerText = score;
            dom.totalCnt.innerText = quizQueue.length;

            if (wrongList.length > 0) {
                dom.wrongBox.style.display = 'block';
                dom.wrongList.innerHTML = wrongList.map(item => `
                    <div class="wrong-item">
                        <div>
                            <div class="w-jp">${item.jp}</div>
                            <div class="w-kr">ì •ë‹µ: ${item.kr}</div>
                        </div>
                        <div style="color:#9ca3af; font-size:0.8rem;">ë‚´ ë‹µ: ${item.user}</div>
                    </div>
                `).join('');
            } else {
                dom.wrongBox.style.display = 'none';
                dom.feedback.innerHTML += "<br><h3>ì™„ë²½í•©ë‹ˆë‹¤! ë§Œì ì´ì—ìš”! ğŸ†</h3>";
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                if (dom.screenQuiz.style.display !== 'none') {
                    handleAction();
                }
            }
        });

        window.onload = initQuiz;
    </script>
</body>
</html>
