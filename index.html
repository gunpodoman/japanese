<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë³¸ì–´ ì–´íœ˜ ë§ˆìŠ¤í„° (ì‹¬í™”)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --primary-hover: #4f46e5;
            --success: #10b981;
            --error: #ef4444;
            --background: linear-gradient(135deg, #a5f3fc 0%, #818cf8 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--background);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #1f2937;
        }

        .container {
            background-color: var(--card-bg);
            padding: 2.5rem;
            border-radius: 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 100%;
            max-width: 480px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        header {
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 1.5rem;
            margin: 0 0 0.5rem 0;
            color: #374151;
        }

        .progress-wrapper {
            background: #e5e7eb;
            height: 8px;
            border-radius: 999px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .status {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 8px;
            font-weight: 500;
        }

        .question-card {
            background: #f3f4f6;
            border-radius: 16px;
            padding: 2.5rem 1rem;
            margin-bottom: 2rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .jp-word {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: #111827;
            line-height: 1.2;
            word-break: keep-all;
        }

        .input-group {
            position: relative;
            margin-bottom: 1.5rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 16px;
            font-size: 1.25rem;
            text-align: center;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            outline: none;
            box-sizing: border-box;
            transition: all 0.2s ease;
            background: white;
            font-family: 'Noto Sans KR', sans-serif;
        }

        input[type="text"]:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        input.correct {
            border-color: var(--success);
            background-color: #ecfdf5;
            color: var(--success);
        }

        input.wrong {
            border-color: var(--error);
            background-color: #fef2f2;
            color: var(--error);
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .feedback-msg {
            min-height: 24px;
            margin-bottom: 1rem;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .msg-success { color: var(--success); }
        .msg-error { color: var(--error); }

        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: var(--primary);
            color: white;
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.3);
        }

        .btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        #result-screen { display: none; }

        .score-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            margin: 1rem 0;
        }

        .wrong-answers-container {
            text-align: left;
            margin-top: 2rem;
            background: #f9fafb;
            border-radius: 12px;
            padding: 1rem;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #e5e7eb;
        }

        .wrong-item {
            padding: 10px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .wrong-item:last-child { border-bottom: none; }
        .w-jp { font-weight: bold; color: var(--error); font-family: 'Noto Sans JP'; }
        .w-kr { color: #4b5563; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="container" id="quiz-screen">
        <header>
            <div class="status">
                <span>STAGE <span id="current-num">1</span></span>
                <span id="remain-num">47 ë‚¨ìŒ</span>
            </div>
            <div class="progress-wrapper">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </header>

        <div class="question-card">
            <div class="jp-word" id="question-text"></div>
        </div>

        <div class="feedback-msg" id="feedback"></div>

        <div class="input-group">
            <input type="text" id="answer-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" spellcheck="false">
        </div>

        <button class="btn" id="action-btn" onclick="handleAction()">ì œì¶œí•˜ê¸° (Enter)</button>
    </div>

    <div class="container" id="result-screen">
        <h1>í…ŒìŠ¤íŠ¸ ì™„ë£Œ!</h1>
        <p>ë‹¹ì‹ ì˜ ìµœì¢… ì ìˆ˜ëŠ”?</p>
        
        <div class="score-display"><span id="final-score">0</span>ì </div>
        <p><span id="correct-cnt">0</span> / <span id="total-cnt">0</span> ë¬¸ì œ ì •ë‹µ</p>

        <div class="wrong-answers-container" id="wrong-box" style="display: none;">
            <h4 style="margin:0 0 10px 0; color:#374151;">í‹€ë¦° ë¬¸ì œ ë³µìŠµ</h4>
            <div id="wrong-list"></div>
        </div>

        <button class="btn" onclick="initQuiz()" style="margin-top: 20px;">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
    </div>

    <script>
        // ìˆ˜ì •ëœ ë°ì´í„°: ã„ã„(ã‚ˆã„), ã—ãŠã‹ã‚‰ã„(ã—ã‚‡ã£ã±ã„) ë¶„ë¦¬
        // í•œì í‘œê¸°(æ˜“ã—ã„, ç†±ã„ ë“±)ëŠ” ë™ìŒì´ì˜ì–´ êµ¬ë¶„ì„ ìœ„í•´ ìœ ì§€
        const vocabData = [
            { jp: "ã‚ãŸã‚‰ã—ã„", kr: "ìƒˆë¡­ë‹¤", valid: ["ìƒˆë¡­ë‹¤"] },
            { jp: "ãµã‚‹ã„", kr: "ì˜¤ë˜ë˜ë‹¤", valid: ["ì˜¤ë˜ë˜ë‹¤", "ì˜¤ë˜ëë‹¤", "ë‚¡ë‹¤"] },
            
            // ë¶„ë¦¬ë¨: ã„ã„ / ã‚ˆã„
            { jp: "ã„ã„", kr: "ì¢‹ë‹¤", valid: ["ì¢‹ë‹¤"] },
            { jp: "ã‚ˆã„", kr: "ì¢‹ë‹¤", valid: ["ì¢‹ë‹¤"] },
            
            { jp: "ã‚ã‚‹ã„", kr: "ë‚˜ì˜ë‹¤", valid: ["ë‚˜ì˜ë‹¤"] },
            { jp: "ã†ã‚Œã—ã„", kr: "ê¸°ì˜ë‹¤", valid: ["ê¸°ì˜ë‹¤"] },
            { jp: "ã‹ãªã—ã„", kr: "ìŠ¬í”„ë‹¤", valid: ["ìŠ¬í”„ë‹¤"] },
            { jp: "ãŠãŠãã„", kr: "í¬ë‹¤", valid: ["í¬ë‹¤"] },
            { jp: "ã¡ã„ã•ã„", kr: "ì‘ë‹¤", valid: ["ì‘ë‹¤"] },
            { jp: "ãŠã„ã—ã„", kr: "ë§›ìˆë‹¤", valid: ["ë§›ìˆë‹¤"] },
            { jp: "ã¾ãšã„", kr: "ë§›ì—†ë‹¤", valid: ["ë§›ì—†ë‹¤"] },
            { jp: "ãŠã‚‚ã—ã‚ã„", kr: "ì¬ë¯¸ìˆë‹¤", valid: ["ì¬ë¯¸ìˆë‹¤", "ì¬ë¯¸ ìˆë‹¤"] },
            { jp: "ã¤ã¾ã‚‰ãªã„", kr: "ì¬ë¯¸ì—†ë‹¤", valid: ["ì¬ë¯¸ì—†ë‹¤", "ì¬ë¯¸ ì—†ë‹¤", "ì§€ë£¨í•˜ë‹¤"] },
            { jp: "ã›ã¾ã„", kr: "ì¢ë‹¤", valid: ["ì¢ë‹¤"] },
            { jp: "ã²ã‚ã„", kr: "ë„“ë‹¤", valid: ["ë„“ë‹¤"] },
            { jp: "ã¡ã‹ã„", kr: "ê°€ê¹ë‹¤", valid: ["ê°€ê¹ë‹¤"] },
            { jp: "ã¨ãŠã„", kr: "ë©€ë‹¤", valid: ["ë©€ë‹¤"] },
            { jp: "ã¿ã˜ã‹ã„", kr: "ì§§ë‹¤", valid: ["ì§§ë‹¤"] },
            { jp: "ãªãŒã„", kr: "ê¸¸ë‹¤", valid: ["ê¸¸ë‹¤"] },
            { jp: "ã™ããªã„", kr: "ì ë‹¤", valid: ["ì ë‹¤"] },
            { jp: "ãŠãŠã„", kr: "ë§ë‹¤", valid: ["ë§ë‹¤"] },
            
            // í•œì êµ¬ë¶„ ìœ ì§€
            { jp: "ã‚„ã•ã—ã„ (æ˜“ã—ã„)", kr: "ì‰½ë‹¤", valid: ["ì‰½ë‹¤"] },
            { jp: "ã‚€ãšã‹ã—ã„", kr: "ì–´ë µë‹¤", valid: ["ì–´ë µë‹¤"] },
            
            { jp: "ã‚ã‹ã„", kr: "ë¹¨ê°›ë‹¤", valid: ["ë¹¨ê°›ë‹¤"] },
            { jp: "ã‚ãŠã„", kr: "íŒŒë—ë‹¤", valid: ["íŒŒë—ë‹¤"] },
            { jp: "ã—ã‚ã„", kr: "í•˜ì–—ë‹¤", valid: ["í•˜ì–—ë‹¤"] },
            { jp: "ãã‚ã„", kr: "ê²€ë‹¤", valid: ["ê²€ë‹¤"] },
            { jp: "ãã„ã‚ã„", kr: "ë…¸ë—ë‹¤", valid: ["ë…¸ë—ë‹¤"] },
            { jp: "ã‹ã‚‰ã„", kr: "ë§µë‹¤", valid: ["ë§µë‹¤"] },
            
            // ë¶„ë¦¬ë¨: ã—ãŠã‹ã‚‰ã„ / ã—ã‚‡ã£ã±ã„
            { jp: "ã—ãŠã‹ã‚‰ã„", kr: "ì§œë‹¤", valid: ["ì§œë‹¤"] },
            { jp: "ã—ã‚‡ã£ã±ã„", kr: "ì§œë‹¤", valid: ["ì§œë‹¤"] },

            { jp: "ã‚ã¾ã„", kr: "ë‹¬ë‹¤", valid: ["ë‹¬ë‹¤"] },
            { jp: "ã™ã£ã±ã„", kr: "ì‹œë‹¤", valid: ["ì‹œë‹¤"] },
            { jp: "ã«ãŒã„", kr: "ì“°ë‹¤", valid: ["ì“°ë‹¤"] },
            
            // í•œì êµ¬ë¶„ ìœ ì§€
            { jp: "ã‚ã¤ã„ (ç†±ã„)", kr: "ëœ¨ê²ë‹¤", valid: ["ëœ¨ê²ë‹¤"] },
            
            { jp: "ã‹ã‚ã„ã„", kr: "ê·€ì—½ë‹¤", valid: ["ê·€ì—½ë‹¤"] },
            { jp: "ã„ããŒã—ã„", kr: "ë°”ì˜ë‹¤", valid: ["ë°”ì˜ë‹¤"] },
            { jp: "ã™ã°ã‚‰ã—ã„", kr: "í›Œë¥­í•˜ë‹¤", valid: ["í›Œë¥­í•˜ë‹¤"] },
            { jp: "ã‚ã¶ãªã„", kr: "ìœ„í—˜í•˜ë‹¤", valid: ["ìœ„í—˜í•˜ë‹¤"] },
            
            // í•œì êµ¬ë¶„ ìœ ì§€
            { jp: "ã‚„ã•ã—ã„ (å„ªã—ã„)", kr: "ìƒëƒ¥í•˜ë‹¤", valid: ["ìƒëƒ¥í•˜ë‹¤"] },
            { jp: "ã‚„ã™ã„ (å®‰ã„)", kr: "(ê°€ê²©ì´) ì‹¸ë‹¤", valid: ["ì‹¸ë‹¤", "ê°€ê²©ì´ ì‹¸ë‹¤", "ê°€ê²©ì´ì‹¸ë‹¤"] },
            
            { jp: "ã•ã‚€ã„", kr: "ì¶¥ë‹¤", valid: ["ì¶¥ë‹¤"] },
            
            // naí˜•ìš©ì‚¬
            { jp: "ãã‚Œã„ã ", kr: "ì•„ë¦„ë‹µë‹¤", valid: ["ì•„ë¦„ë‹µë‹¤", "ì˜ˆì˜ë‹¤", "ê¹¨ë—í•˜ë‹¤"] },
            { jp: "ã™ã¦ãã ", kr: "ë©‹ì§€ë‹¤, ê·¼ì‚¬í•˜ë‹¤", valid: ["ë©‹ì§€ë‹¤", "ê·¼ì‚¬í•˜ë‹¤"] },
            { jp: "ã™ãã ", kr: "ì¢‹ì•„í•˜ë‹¤", valid: ["ì¢‹ì•„í•˜ë‹¤"] },
            { jp: "ãã‚‰ã„ã ", kr: "ì‹«ì–´í•˜ë‹¤", valid: ["ì‹«ì–´í•˜ë‹¤"] },
            
            // í•œì êµ¬ë¶„ ìœ ì§€
            { jp: "ã˜ã‚‡ã†ãš (ä¸Šæ‰‹)ã ", kr: "ì˜í•˜ë‹¤, ëŠ¥ìˆ™í•˜ë‹¤", valid: ["ì˜í•˜ë‹¤", "ëŠ¥ìˆ™í•˜ë‹¤"] },
            { jp: "ã¸ãŸ (ä¸‹æ‰‹)ã ", kr: "ì˜ ëª»í•˜ë‹¤, ì„œíˆ¬ë¥´ë‹¤", valid: ["ì˜ ëª»í•˜ë‹¤", "ì˜ëª»í•˜ë‹¤", "ì„œíˆ¬ë¥´ë‹¤"] },
            
            { jp: "ã—ãšã‹ã ", kr: "ì¡°ìš©í•˜ë‹¤, ê³ ìš”í•˜ë‹¤", valid: ["ì¡°ìš©í•˜ë‹¤", "ê³ ìš”í•˜ë‹¤"] },
            { jp: "ã ã‚ã ", kr: "ì•ˆ ë˜ë‹¤", valid: ["ì•ˆ ë˜ë‹¤", "ì•ˆë˜ë‹¤"] },
            { jp: "ã¾ã˜ã‚ã ", kr: "ì„±ì‹¤í•˜ë‹¤", valid: ["ì„±ì‹¤í•˜ë‹¤"] },
            { jp: "ã«ãã‚„ã‹ã ", kr: "ë²ˆí™”í•˜ë‹¤", valid: ["ë²ˆí™”í•˜ë‹¤"] }
        ];

        let quizQueue = [];
        let currentIndex = 0;
        let score = 0;
        let wrongList = [];
        let isWaitingNext = false;

        const dom = {
            screenQuiz: document.getElementById('quiz-screen'),
            screenResult: document.getElementById('result-screen'),
            progress: document.getElementById('progress-bar'),
            currentNum: document.getElementById('current-num'),
            remainNum: document.getElementById('remain-num'),
            question: document.getElementById('question-text'),
            input: document.getElementById('answer-input'),
            feedback: document.getElementById('feedback'),
            btn: document.getElementById('action-btn'),
            finalScore: document.getElementById('final-score'),
            correctCnt: document.getElementById('correct-cnt'),
            totalCnt: document.getElementById('total-cnt'),
            wrongBox: document.getElementById('wrong-box'),
            wrongList: document.getElementById('wrong-list')
        };

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function initQuiz() {
            quizQueue = shuffle([...vocabData]);
            currentIndex = 0;
            score = 0;
            wrongList = [];
            isWaitingNext = false;

            dom.screenQuiz.style.display = 'block';
            dom.screenResult.style.display = 'none';
            dom.screenQuiz.style.transform = 'translateY(0)';
            
            showQuestion();
        }

        function showQuestion() {
            isWaitingNext = false;
            const currentData = quizQueue[currentIndex];
            const total = quizQueue.length;

            dom.currentNum.innerText = currentIndex + 1;
            dom.remainNum.innerText = `${total - currentIndex} ë‚¨ìŒ`;
            dom.progress.style.width = `${((currentIndex) / total) * 100}%`;
            
            dom.question.innerText = currentData.jp;
            dom.feedback.innerText = '';
            
            dom.input.value = '';
            dom.input.disabled = false;
            dom.input.className = '';
            dom.input.focus();

            dom.btn.innerText = 'ì œì¶œí•˜ê¸° (Enter)';
            dom.btn.style.background = 'var(--primary)';
        }

        function handleAction() {
            if (isWaitingNext) {
                nextQuestion();
            } else {
                checkAnswer();
            }
        }

        function checkAnswer() {
            const inputVal = dom.input.value.trim();
            if (!inputVal) return;

            const currentData = quizQueue[currentIndex];
            const cleanInput = inputVal.replace(/\s+/g, '');
            
            const isCorrect = currentData.valid.some(ans => ans.replace(/\s+/g, '') === cleanInput);

            isWaitingNext = true;
            dom.input.disabled = true;

            if (isCorrect) {
                score++;
                dom.input.classList.add('correct');
                dom.feedback.innerHTML = '<span class="msg-success">ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰</span>';
                dom.btn.style.background = 'var(--success)';
            } else {
                dom.input.classList.add('wrong');
                dom.feedback.innerHTML = `<span class="msg-error">ì˜¤ë‹µ! ì •ë‹µì€ [${currentData.kr}] ì…ë‹ˆë‹¤.</span>`;
                dom.btn.style.background = 'var(--error)';
                wrongList.push({
                    jp: currentData.jp,
                    kr: currentData.kr,
                    user: inputVal
                });
            }

            dom.btn.innerText = 'ë‹¤ìŒ ë¬¸ì œ (Enter â†µ)';
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex >= quizQueue.length) {
                finishQuiz();
            } else {
                showQuestion();
            }
        }

        function finishQuiz() {
            dom.screenQuiz.style.display = 'none';
            dom.screenResult.style.display = 'block';

            const finalScoreVal = Math.round((score / quizQueue.length) * 100);
            dom.finalScore.innerText = finalScoreVal;
            dom.correctCnt.innerText = score;
            dom.totalCnt.innerText = quizQueue.length;

            if (wrongList.length > 0) {
                dom.wrongBox.style.display = 'block';
                dom.wrongList.innerHTML = wrongList.map(item => `
                    <div class="wrong-item">
                        <div>
                            <div class="w-jp">${item.jp}</div>
                            <div class="w-kr">ì •ë‹µ: ${item.kr}</div>
                        </div>
                        <div style="color:#9ca3af; font-size:0.8rem;">ë‚´ ë‹µ: ${item.user}</div>
                    </div>
                `).join('');
            } else {
                dom.wrongBox.style.display = 'none';
                dom.feedback.innerHTML += "<br><h3>ì™„ë²½í•©ë‹ˆë‹¤! ë§Œì ì´ì—ìš”! ğŸ†</h3>";
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                if (dom.screenQuiz.style.display !== 'none') {
                    handleAction();
                }
            }
        });

        window.onload = initQuiz;
    </script>
</body>
</html>
