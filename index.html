<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë³¸ì–´ í˜•ìš©ì‚¬ ë‹¨ì–´ ì‹œí—˜</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --bg-color: #f5f7fa;
        }

        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }

        /* Progress Bar */
        .progress-container {
            width: 100%;
            background-color: #eee;
            border-radius: 10px;
            height: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .status-text {
            display: flex;
            justify-content: space-between;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 20px;
            font-weight: bold;
        }

        /* Question Area */
        .question-box {
            background-color: #ecf0f1;
            padding: 3rem 1rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            position: relative;
        }

        .jp-word {
            font-size: 2.5rem;
            font-weight: 800;
            color: #2c3e50;
            word-break: keep-all;
        }

        .hint {
            font-size: 0.9rem;
            color: #95a5a6;
            margin-top: 10px;
        }

        /* Input Area */
        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            box-sizing: border-box;
            text-align: center;
            transition: border-color 0.3s;
            outline: none;
        }

        input[type="text"]:focus {
            border-color: var(--primary-color);
        }

        input[type="text"].correct {
            border-color: var(--success-color);
            background-color: #e8f8f5;
        }

        input[type="text"].wrong {
            border-color: var(--error-color);
            background-color: #fdeaea;
        }

        /* Buttons */
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: transform 0.1s, background-color 0.2s;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        /* Feedback Message */
        .feedback {
            min-height: 20px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .feedback.success { color: var(--success-color); }
        .feedback.error { color: var(--error-color); }

        /* Result Screen */
        .result-screen {
            display: none;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(74, 144, 226, 0.3);
        }

        .wrong-list {
            text-align: left;
            margin-top: 30px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
        }

        .wrong-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
            font-size: 0.95rem;
        }
        
        .wrong-item span {
            display: block;
        }
        
        .wrong-jp { color: #e74c3c; font-weight: bold; }
        .wrong-kr { color: #7f8c8d; font-size: 0.9rem; margin-top: 4px;}

        /* Mobile Optimization */
        @media (max-width: 400px) {
            .container { padding: 1.5rem; }
            .jp-word { font-size: 2rem; }
        }
    </style>
</head>
<body>

<div class="container" id="quiz-container">
    <h1>ì–´íœ˜ í…ŒìŠ¤íŠ¸</h1>
    <div class="subtitle">íˆë¼ê°€ë‚˜ë¥¼ ë³´ê³  ëœ»ì„ ì…ë ¥í•˜ì„¸ìš”</div>

    <div class="status-text">
        <span>ì§„í–‰ë„</span>
        <span id="progress-text">1 / 45</span>
    </div>
    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <div class="question-box">
        <div class="jp-word" id="question-display"></div>
        <div class="hint" id="category-hint"></div>
    </div>

    <div class="input-group">
        <input type="text" id="answer-input" placeholder="ì •ë‹µ ì…ë ¥ (ì—”í„°)" autocomplete="off">
    </div>

    <button class="btn" id="submit-btn" onclick="checkAnswer()">ì œì¶œí•˜ê¸°</button>
    <div class="feedback" id="feedback-msg"></div>
</div>

<div class="container result-screen" id="result-container">
    <h1>í…ŒìŠ¤íŠ¸ ì¢…ë£Œ</h1>
    <p>ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ê²°ê³¼ëŠ”...</p>
    
    <div class="score-circle">
        <span id="final-score">0</span>ì 
    </div>

    <p id="result-summary"></p>

    <div class="wrong-list" id="wrong-answers-box" style="display:none;">
        <h3 style="margin-top:0; color:#333;">ì˜¤ë‹µ ë…¸íŠ¸</h3>
        <div id="wrong-list-content"></div>
    </div>

    <button class="btn" onclick="initGame()" style="margin-top: 20px;">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
</div>

<script>
    /* ë°ì´í„° êµ¬ì¡°: 
     jp: ë¬¸ì œ (ì¼ë³¸ì–´)
     kr: ì •ë‹µ ë¬¸ìì—´ (í™”ë©´ í‘œì‹œìš©)
     valid: ì •ë‹µìœ¼ë¡œ ì¸ì •í•  í‚¤ì›Œë“œ ë°°ì—´ (ìœ ì—°í•œ ì •ë‹µ ì²˜ë¦¬ë¥¼ ìœ„í•¨)
    */
    const vocabData = [
        // 1. ií˜•ìš©ì‚¬(ë°˜ëŒ€ë§)
        { jp: "ã‚ãŸã‚‰ã—ã„", kr: "ìƒˆë¡­ë‹¤", valid: ["ìƒˆë¡­ë‹¤"] },
        { jp: "ãµã‚‹ã„", kr: "ì˜¤ë˜ë˜ë‹¤", valid: ["ì˜¤ë˜ë˜ë‹¤", "ì˜¤ë˜ëë‹¤"] },
        { jp: "ã„ã„ (ã‚ˆã„)", kr: "ì¢‹ë‹¤", valid: ["ì¢‹ë‹¤"] },
        { jp: "ã‚ã‚‹ã„", kr: "ë‚˜ì˜ë‹¤", valid: ["ë‚˜ì˜ë‹¤"] },
        { jp: "ã†ã‚Œã—ã„", kr: "ê¸°ì˜ë‹¤", valid: ["ê¸°ì˜ë‹¤"] },
        { jp: "ã‹ãªã—ã„", kr: "ìŠ¬í”„ë‹¤", valid: ["ìŠ¬í”„ë‹¤"] },
        { jp: "ãŠãŠãã„", kr: "í¬ë‹¤", valid: ["í¬ë‹¤"] },
        { jp: "ã¡ã„ã•ã„", kr: "ì‘ë‹¤", valid: ["ì‘ë‹¤"] },
        { jp: "ãŠã„ã—ã„", kr: "ë§›ìˆë‹¤", valid: ["ë§›ìˆë‹¤"] },
        { jp: "ã¾ãšã„", kr: "ë§›ì—†ë‹¤", valid: ["ë§›ì—†ë‹¤"] },
        { jp: "ãŠã‚‚ã—ã‚ã„", kr: "ì¬ë¯¸ìˆë‹¤", valid: ["ì¬ë¯¸ìˆë‹¤", "ì¬ë¯¸ ìˆë‹¤"] },
        { jp: "ã¤ã¾ã‚‰ãªã„", kr: "ì¬ë¯¸ì—†ë‹¤", valid: ["ì¬ë¯¸ì—†ë‹¤", "ì¬ë¯¸ ì—†ë‹¤", "ì§€ë£¨í•˜ë‹¤"] },
        { jp: "ã›ã¾ã„", kr: "ì¢ë‹¤", valid: ["ì¢ë‹¤"] },
        { jp: "ã²ã‚ã„", kr: "ë„“ë‹¤", valid: ["ë„“ë‹¤"] },
        { jp: "ã¡ã‹ã„", kr: "ê°€ê¹ë‹¤", valid: ["ê°€ê¹ë‹¤"] },
        { jp: "ã¨ãŠã„", kr: "ë©€ë‹¤", valid: ["ë©€ë‹¤"] },
        { jp: "ã¿ã˜ã‹ã„", kr: "ì§§ë‹¤", valid: ["ì§§ë‹¤"] },
        { jp: "ãªãŒã„", kr: "ê¸¸ë‹¤", valid: ["ê¸¸ë‹¤"] },
        { jp: "ã™ããªã„", kr: "ì ë‹¤", valid: ["ì ë‹¤"] },
        { jp: "ãŠãŠã„", kr: "ë§ë‹¤", valid: ["ë§ë‹¤"] },
        { jp: "ã‚„ã•ã—ã„ (æ˜“ã—ã„)", kr: "ì‰½ë‹¤", valid: ["ì‰½ë‹¤"] },
        { jp: "ã‚€ãšã‹ã—ã„", kr: "ì–´ë µë‹¤", valid: ["ì–´ë µë‹¤"] },

        // ìƒ‰
        { jp: "ã‚ã‹ã„", kr: "ë¹¨ê°›ë‹¤", valid: ["ë¹¨ê°›ë‹¤"] },
        { jp: "ã‚ãŠã„", kr: "íŒŒë—ë‹¤", valid: ["íŒŒë—ë‹¤"] },
        { jp: "ã—ã‚ã„", kr: "í•˜ì–—ë‹¤", valid: ["í•˜ì–—ë‹¤"] },
        { jp: "ãã‚ã„", kr: "ê²€ë‹¤", valid: ["ê²€ë‹¤"] },
        { jp: "ãã„ã‚ã„", kr: "ë…¸ë—ë‹¤", valid: ["ë…¸ë—ë‹¤"] },

        // ë§›
        { jp: "ã‹ã‚‰ã„", kr: "ë§µë‹¤", valid: ["ë§µë‹¤"] },
        { jp: "ã—ãŠã‹ã‚‰ã„ (ã—ã‚‡ã£ã±ã„)", kr: "ì§œë‹¤", valid: ["ì§œë‹¤"] },
        { jp: "ã‚ã¾ã„", kr: "ë‹¬ë‹¤", valid: ["ë‹¬ë‹¤"] },
        { jp: "ã™ã£ã±ã„", kr: "ì‹œë‹¤", valid: ["ì‹œë‹¤"] },
        { jp: "ã«ãŒã„", kr: "ì“°ë‹¤", valid: ["ì“°ë‹¤"] },

        // ê·¸ ì™¸
        { jp: "ã‚ã¤ã„ (ç†±ã„)", kr: "ëœ¨ê²ë‹¤", valid: ["ëœ¨ê²ë‹¤"] },
        { jp: "ã‹ã‚ã„ã„", kr: "ê·€ì—½ë‹¤", valid: ["ê·€ì—½ë‹¤"] },
        { jp: "ã„ããŒã—ã„", kr: "ë°”ì˜ë‹¤", valid: ["ë°”ì˜ë‹¤"] },
        { jp: "ã™ã°ã‚‰ã—ã„", kr: "í›Œë¥­í•˜ë‹¤", valid: ["í›Œë¥­í•˜ë‹¤"] },
        { jp: "ã‚ã¶ãªã„", kr: "ìœ„í—˜í•˜ë‹¤", valid: ["ìœ„í—˜í•˜ë‹¤"] },
        { jp: "ã‚„ã•ã—ã„ (å„ªã—ã„)", kr: "ìƒëƒ¥í•˜ë‹¤", valid: ["ìƒëƒ¥í•˜ë‹¤"] },
        { jp: "ã‚„ã™ã„ (å®‰ã„)", kr: "(ê°€ê²©ì´) ì‹¸ë‹¤", valid: ["ì‹¸ë‹¤", "ê°€ê²©ì´ ì‹¸ë‹¤", "ê°€ê²©ì´ì‹¸ë‹¤"] },
        { jp: "ã•ã‚€ã„", kr: "ì¶¥ë‹¤", valid: ["ì¶¥ë‹¤"] },

        // 2. naí˜•ìš©ì‚¬
        { jp: "ãã‚Œã„ã ", kr: "ì•„ë¦„ë‹µë‹¤", valid: ["ì•„ë¦„ë‹µë‹¤", "ì˜ˆì˜ë‹¤"] },
        { jp: "ã™ã¦ãã ", kr: "ë©‹ì§€ë‹¤, ê·¼ì‚¬í•˜ë‹¤", valid: ["ë©‹ì§€ë‹¤", "ê·¼ì‚¬í•˜ë‹¤"] },
        { jp: "ã™ãã ", kr: "ì¢‹ì•„í•˜ë‹¤", valid: ["ì¢‹ì•„í•˜ë‹¤"] },
        { jp: "ãã‚‰ã„ã ", kr: "ì‹«ì–´í•˜ë‹¤", valid: ["ì‹«ì–´í•˜ë‹¤"] },
        { jp: "ã˜ã‚‡ã†ãš (ä¸Šæ‰‹)ã ", kr: "ì˜í•˜ë‹¤, ëŠ¥ìˆ™í•˜ë‹¤", valid: ["ì˜í•˜ë‹¤", "ëŠ¥ìˆ™í•˜ë‹¤"] },
        { jp: "ã¸ãŸ (ä¸‹æ‰‹)ã ", kr: "ì˜ ëª»í•˜ë‹¤, ì„œíˆ¬ë¥´ë‹¤", valid: ["ì˜ ëª»í•˜ë‹¤", "ì˜ëª»í•˜ë‹¤", "ì„œíˆ¬ë¥´ë‹¤"] }, // 'ì˜ëª»í•˜ë‹¤'ë„ í—ˆìš©
        { jp: "ã—ãšã‹ã ", kr: "ì¡°ìš©í•˜ë‹¤, ê³ ìš”í•˜ë‹¤", valid: ["ì¡°ìš©í•˜ë‹¤", "ê³ ìš”í•˜ë‹¤"] },
        { jp: "ã ã‚ã ", kr: "ì•ˆ ë˜ë‹¤", valid: ["ì•ˆ ë˜ë‹¤", "ì•ˆë˜ë‹¤"] },
        { jp: "ã¾ã˜ã‚ã ", kr: "ì„±ì‹¤í•˜ë‹¤", valid: ["ì„±ì‹¤í•˜ë‹¤"] },
        { jp: "ã«ãã‚„ã‹ã ", kr: "ë²ˆí™”í•˜ë‹¤", valid: ["ë²ˆí™”í•˜ë‹¤"] }
    ];

    let gameQueue = [];
    let currentIndex = 0;
    let score = 0;
    let wrongAnswers = [];
    let isWaitingNext = false;

    const dom = {
        quizContainer: document.getElementById('quiz-container'),
        resultContainer: document.getElementById('result-container'),
        progressText: document.getElementById('progress-text'),
        progressBar: document.getElementById('progress-bar'),
        question: document.getElementById('question-display'),
        input: document.getElementById('answer-input'),
        btn: document.getElementById('submit-btn'),
        feedback: document.getElementById('feedback-msg'),
        finalScore: document.getElementById('final-score'),
        resultSummary: document.getElementById('result-summary'),
        wrongBox: document.getElementById('wrong-answers-box'),
        wrongList: document.getElementById('wrong-list-content')
    };

    // ë°°ì—´ ì„ê¸°
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function initGame() {
        gameQueue = shuffle([...vocabData]);
        currentIndex = 0;
        score = 0;
        wrongAnswers = [];
        isWaitingNext = false;

        dom.quizContainer.style.display = 'block';
        dom.resultContainer.style.display = 'none';
        
        showQuestion();
    }

    function showQuestion() {
        isWaitingNext = false;
        const currentData = gameQueue[currentIndex];
        
        // UI ì´ˆê¸°í™”
        dom.question.innerText = currentData.jp;
        dom.input.value = '';
        dom.input.className = '';
        dom.input.disabled = false;
        dom.input.focus();
        dom.feedback.innerText = '';
        dom.btn.innerText = 'ì œì¶œí•˜ê¸°';
        dom.btn.className = 'btn';

        // ì§„í–‰ë„ ì—…ë°ì´íŠ¸
        const progress = ((currentIndex + 1) / gameQueue.length) * 100;
        dom.progressBar.style.width = `${progress}%`;
        dom.progressText.innerText = `${currentIndex + 1} / ${gameQueue.length}`;
    }

    function checkAnswer() {
        if (isWaitingNext) {
            nextQuestion();
            return;
        }

        const userInput = dom.input.value.trim();
        if (!userInput) return; // ë¹ˆ ì…ë ¥ ë°©ì§€

        const currentData = gameQueue[currentIndex];
        // ë„ì–´ì“°ê¸° ì œê±° í›„ ë¹„êµ (ìœ ì—°ì„±)
        const cleanInput = userInput.replace(/\s+/g, '');
        
        // ì •ë‹µ ì²´í¬ ë¡œì§: valid ë°°ì—´ì˜ í•­ëª©ë“¤ê³¼ ë¹„êµ
        const isCorrect = currentData.valid.some(answer => {
            return answer.replace(/\s+/g, '') === cleanInput;
        });

        if (isCorrect) {
            processResult(true, "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰");
        } else {
            processResult(false, `ì˜¤ë‹µ! ì •ë‹µì€ "${currentData.kr}" ì…ë‹ˆë‹¤.`);
            wrongAnswers.push({
                jp: currentData.jp,
                kr: currentData.kr,
                user: userInput
            });
        }
    }

    function processResult(isSuccess, message) {
        isWaitingNext = true;
        dom.input.disabled = true;
        dom.btn.innerText = 'ë‹¤ìŒ ë¬¸ì œ >';
        
        if (isSuccess) {
            score++;
            dom.input.classList.add('correct');
            dom.feedback.className = 'feedback success';
            dom.btn.style.backgroundColor = '#2ecc71';
        } else {
            dom.input.classList.add('wrong');
            dom.feedback.className = 'feedback error';
            dom.btn.style.backgroundColor = '#e74c3c';
        }
        
        dom.feedback.innerText = message;
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex >= gameQueue.length) {
            finishGame();
        } else {
            // ë²„íŠ¼ ìƒ‰ìƒ ì›ë˜ëŒ€ë¡œ ë³µêµ¬
            dom.btn.style.backgroundColor = '';
            showQuestion();
        }
    }

    function finishGame() {
        dom.quizContainer.style.display = 'none';
        dom.resultContainer.style.display = 'block';

        const finalScore = Math.round((score / gameQueue.length) * 100);
        dom.finalScore.innerText = finalScore;
        dom.resultSummary.innerText = `ì´ ${gameQueue.length}ë¬¸ì œ ì¤‘ ${score}ê°œë¥¼ ë§ì·„ìŠµë‹ˆë‹¤.`;

        // ì˜¤ë‹µ ë…¸íŠ¸ í‘œì‹œ
        if (wrongAnswers.length > 0) {
            dom.wrongBox.style.display = 'block';
            dom.wrongList.innerHTML = wrongAnswers.map(item => `
                <div class="wrong-item">
                    <span class="wrong-jp">${item.jp}</span>
                    <span class="wrong-kr">ì •ë‹µ: ${item.kr}</span>
                    <span style="color:#999; font-size:0.8rem;">(ë‚´ê°€ ì“´ ë‹µ: ${item.user})</span>
                </div>
            `).join('');
        } else {
            dom.wrongBox.style.display = 'none';
            dom.resultSummary.innerHTML += "<br><b>ì™„ë²½í•©ë‹ˆë‹¤! ëª¨ë“  ë¬¸ì œë¥¼ ë§ì·„ì–´ìš”! ğŸ‘</b>";
        }
    }

    // ì—”í„°í‚¤ ì…ë ¥ ì²˜ë¦¬
    dom.input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            checkAnswer();
        }
    });

    // ì‹œì‘
    window.onload = initGame;
</script>

</body>
</html>
